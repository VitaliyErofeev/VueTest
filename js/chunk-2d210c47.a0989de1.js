(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210c47"],{b8fa:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main-container"},[i("div",{staticClass:"toolbar"},[i("span",[e._v("Edit Contact")]),i("button",{staticClass:"small",attrs:{disabled:!e.history.length},on:{click:e.undoChanges}},[e._v(" Undo ")])]),i("div",{staticClass:"content"},[i("form",{staticClass:"form"},[i("label",{attrs:{for:"fname"}},[e._v("Name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{"data-name":"name",type:"text",placeholder:"Name.."},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),i("label",{attrs:{for:"fname"}},[e._v("Surname")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.sname,expression:"sname"}],attrs:{"data-name":"sname",type:"text",placeholder:"SName.."},domProps:{value:e.sname},on:{input:function(t){t.target.composing||(e.sname=t.target.value)}}}),i("label",{attrs:{for:"phone"}},[e._v("Phone")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{"data-name":"phone",type:"text",placeholder:"Phone.."},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),e.contactFields.length?i("hr"):e._e(),e._l(e.contactFields,(function(t,a,n){return i("div",{key:n,staticClass:"field"},[a!=e.editedKey?[i("label",{attrs:{for:a}},[e._v(e._s(a))]),i("input",{attrs:{type:"text"},domProps:{value:t}}),i("button",{staticClass:"small",on:{click:function(t){return t.preventDefault(),e.openEditField(a)}}},[e._v(" Edit ")]),i("button",{staticClass:"small red",on:{click:function(t){return t.preventDefault(),e.removeField(a)}}},[e._v(" Remove ")])]:[i("input",{directives:[{name:"model",rawName:"v-model",value:e.editedField.key,expression:"editedField.key"}],attrs:{type:"text",placeholder:"Field Name.."},domProps:{value:e.editedField.key},on:{input:function(t){t.target.composing||e.$set(e.editedField,"key",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.editedField.value,expression:"editedField.value"}],attrs:{type:"text",placeholder:"Value.."},domProps:{value:e.editedField.value},on:{input:function(t){t.target.composing||e.$set(e.editedField,"value",t.target.value)}}}),i("button",{staticClass:"small",on:{click:function(t){return t.preventDefault(),e.updateField(!0)}}},[e._v(" Update ")]),i("button",{staticClass:"small red",on:{click:function(t){return t.preventDefault(),e.updateField(!1)}}},[e._v(" Cancel ")])]],2)})),e.newField?i("div",{staticClass:"new-field-block"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.key,expression:"key"}],attrs:{type:"text",placeholder:"Field Name.."},domProps:{value:e.key},on:{input:function(t){t.target.composing||(e.key=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"text",placeholder:"Value.."},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("button",{staticClass:"small",on:{click:function(t){return t.preventDefault(),e.addNewField(t)}}},[e._v(" Add ")]),i("button",{staticClass:"small red",on:{click:function(t){t.preventDefault(),e.newField=!1}}},[e._v(" Cancel ")])]):e._e(),i("hr"),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.newField,expression:"!newField"}],staticClass:"add-field-btn",on:{click:function(t){t.preventDefault(),e.newField=!0}}},[e._v(" Add Field ")]),i("br"),i("br"),i("button",{attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submitHandler(t)}}},[e._v("Save")]),i("button",{staticClass:"cancel-button red",on:{click:function(t){return t.preventDefault(),e.cancelEdit(t)}}},[e._v(" Cancel ")])],2)])])},n=[],s=(i("b0c0"),i("5530")),l={data:function(){return{editedKey:"",editedField:{key:"",value:""},key:"",value:"",name:"",sname:"",phone:"",history:[],contactFields:{},newField:!1}},computed:{contact:function(){return this.$store.getters.contactById(+this.$route.params.id)}},mounted:function(){this.name=this.contact.name,this.sname=this.contact.sname,this.phone=this.contact.phone,this.contactFields=Object(s["a"])({},this.contact.fields)},methods:{cancelEdit:function(){this.$router.push("/")},openEditField:function(e){this.editedKey=e,this.editedField.key=e,this.editedField.value=this.contactFields[e]},updateField:function(e){if(e)if(this.checkKeyExist(this.editedKey))alert("Field with key ".concat(this.editedKey," already exist"));else{var t=Object(s["a"])({},this.contactFields);this.history.push(JSON.parse(JSON.stringify(this.contactFields))),delete t[this.editedKey],t[this.editedField.key]=this.editedField.value,this.contactFields=t,this.editedKey="",this.editedField={key:"",value:""}}else{var i=confirm("Discard changes ?");i&&(this.editedKey="",this.editedField={key:"",value:""})}},submitHandler:function(){this.$store.dispatch("updateContact",{id:this.contact.id,name:this.name,sname:this.sname,phone:this.phone,fields:this.contactFields}),this.$router.push("/")},removeField:function(e){var t=confirm("Delete field: ".concat(e," ?"));if(t){var i=Object(s["a"])({},this.contactFields);delete i[e],this.history.push(JSON.parse(JSON.stringify(this.contactFields))),this.contactFields=i}},checkKeyExist:function(e){for(var t in this.contactFields)if(t===e)return!0;return!1},addNewField:function(){this.checkKeyExist(this.key)?alert("Field with key ".concat(this.key," already exist")):(this.checkKeyExist(),""!=this.key||""!=this.value?(this.history.push(JSON.parse(JSON.stringify(this.contactFields))),this.contactFields[this.key]=this.value,this.newField=!1):alert("Field Name or Value is empty"),this.key="",this.value="")},undoChanges:function(){this.contactFields=this.history.pop()}}},o=l,d=i("2877"),c=Object(d["a"])(o,a,n,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d210c47.a0989de1.js.map